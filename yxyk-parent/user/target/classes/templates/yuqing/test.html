<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>简单路径</title>
    <style type="text/css">
        body{
            margin:0;
            height:100%;
            width:100%;
            position:absolute;
            font-size:12px;
        }
        #mapContainer{
            position: absolute;
            top:0;
            left: 0;
            right:0;
            bottom:0;
        }

        #tip{
            background-color:#fff;
            border:1px solid #ccc;
            padding-left:10px;
            padding-right:2px;
            position:absolute;
            min-height:65px;
            top:10px;
            font-size:12px;
            right:10px;
            border-radius:3px;
            overflow:hidden;
            line-height:20px;
            min-width:400px;
        }
        #tip input[type="button"]{
            background-color: #0D9BF2;
            height:25px;
            text-align:center;
            line-height:25px;
            color:#fff;
            font-size:12px;
            border-radius:3px;
            outline: none;
            border:0;
            cursor:pointer;
        }

        #tip input[type="text"]{
            height:25px;
            border:1px solid #ccc;
            padding-left:5px;
            border-radius:3px;
            outline:none;
        }
        #pos{
            height: 150px;
            width: 150px;
            background-color: #fff;
            padding-left: 10px;
            padding-right: 10px;
            position:absolute;
            font-size: 12px;
            right: 10px;
            bottom: 30px;
            border-radius: 3px;
            line-height: 30px;
            border:1px solid #ccc;
        }
        #pos input{
            border:1px solid #ddd;
            height:23px;
            border-radius:3px;
            outline:none;
        }

        #result1{
            max-height:300px;
        }
    </style>
</head>
<body>
<div id="mapContainer" ></div>
<div id="pos">
<!--    <b>鼠标左键在地图上单击获取坐标</b>-->
<!--    <br><div>X：<input type="text" id="lngX" name="lngX" value=""/>&nbsp;Y：<input type="text" id="latY" name="latY" value=""/></div>-->
<!--    <br><div>起点</div><div>X：<input type="text" id="stateX" name="" value=""/>&nbsp;Y：<input type="text" id="stateY" name="" value=""/></div>-->
<!--    <br><div>终点</div><div>X：<input type="text" id="endX" name="" value=""/>&nbsp;Y：<input type="text" id="endy" name="" value=""/></div>-->
<!--    <br><button type="button">规划线路</button>-->
    <br><div id="app">nihao</div>
</div>


<script type="text/javascript" src="http://webapi.amap.com/maps?v=1.3&key=55f9129cbca7d5acc4432e672afde54c"></script>
<script src="//webapi.amap.com/ui/1.1/main.js?v=1.1.1"></script>
<script type="text/javascript">
    //创建地图
    var map = new AMap.Map('mapContainer', {
        zoom: 13,
        center: [112.550364, 37.869956],//中心点坐标
    });
    var defaultRenderOptions = {
        pathNavigatorStyle: {
            initRotateDegree: 0,
            width: 16,
            height: 16,
            autoRotate: true,
            lineJoin: 'round',
            content: 'defaultPathNavigator',
            fillStyle: '#087EC4',
            strokeStyle: '#116394', //'#eeeeee',
            lineWidth: 1,
            pathLinePassedStyle: {
                lineWidth: 10,
                strokeStyle: 'rgba(8, 126, 196, 1)',
                borderWidth: 1,
                borderStyle: '#eeeeee',
                dirArrowStyle: false
            }
        }
    };
    window.setInterval(function() {
        var a=RandomNumBoth(0,100);
        $("#app").html("<br>经过"+a+"辆车")
    },2000);
    function RandomNumBoth(Min,Max){

        var Range = Max - Min;

        var Rand = Math.random();

        var num = Min + Math.round(Rand * Range); //四舍五入

        return num;

    }
    AMapUI.load(['ui/misc/PathSimplifier', 'lib/$'], function(PathSimplifier, $,utils) {

        if (!PathSimplifier.supportCanvas) {
            alert('当前环境不支持 Canvas！');
            return;
        }

        var pathSimplifierIns = new PathSimplifier({
            zIndex: 100,
            //autoSetFitView:false,
            map: map, //所属的地图实例

            getPath: function(pathData, pathIndex) {

                return pathData.path;
            },
            getHoverTitle: function(pathData, pathIndex, pointIndex) {

                if (pointIndex >= 0) {
                    //point
                    return pathData.name + '，点：' + pointIndex + '/' + pathData.path.length;
                }

                return pathData.name + '，点数量' + pathData.path.length;
            },
            renderOptions: defaultRenderOptions

        });


        window.pathSimplifierIns = pathSimplifierIns;

        //设置数据
        pathSimplifierIns.setData([{
            name: '路线0',
            path: [
                [112.599031, 37.925188],
                [112.602952, 37.916528],
                [112.606085, 37.907861],
                [112.606128, 37.907691],
                // [106.380111, 42.149509],
                // [103.774185, 42.56996],
                // [101.135432, 42.930601],
                // [98.46826, 43.229964],
                // [95.777529, 43.466798],
                // [93.068486, 43.64009],
                // [90.34669, 43.749086],

            ]
        }]);

        //对第一条线路（即索引 0）创建一个巡航器
        var navg1 = pathSimplifierIns.createPathNavigator(0, {
            loop: true, //循环播放
            speed: 1000 ,//巡航速度，单位千米/小时
            pathLinePassedStyle: {
                lineWidth: 6,
                strokeStyle: 'black',
                dirArrowStyle: {
                    width: 30,
                    height: 30,
                }
            }

        });

        navg1.start();
    });

</script>
</body>
</html>